<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Merge PDF Files Online | Client-Side PDF Merger</title>
    <meta name="description" content="Merge multiple PDF documents into one single file instantly in your browser. Fast, secure, and 100% private." />
    <link rel="canonical" href="https://secure-img-to-pdf.vercel.app/pdf-merger" />
    <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
    <style>
        /* (COPY/PASTE YOUR COMPLETE CSS BLOCK HERE) */
        :root { --color-primary:#007AFF; --color-secondary:#00C4CC; --color-background:#F8F9FA; --color-surface:#FFFFFF; --color-dark:#212529; --color-muted:#6C757D; --color-success:#28A745; --color-error:#DC3545; }
        *{margin:0;padding:0;box-sizing:border-box;scroll-behavior:smooth}
        body{font-family:Inter, 'Segoe UI', Arial, sans-serif;background:var(--color-background);color:var(--color-dark);line-height:1.6;display:flex;flex-direction:column;min-height:100vh}
        .trust-bar{background:var(--color-success);color:var(--color-surface);padding:8px 0;text-align:center;font-size:.9em;font-weight:600}
        .site-header{background:var(--color-surface);padding:15px 0;box-shadow:0 2px 4px rgba(0,0,0,.05);position:sticky;top:0;z-index:1000}
        .header-content{max-width:1200px;margin:0 auto;padding:0 30px;display:flex;justify-content:space-between;align-items:center}
        .logo{font-size:1.6em;font-weight:800;color:var(--color-primary);cursor:pointer;letter-spacing:-.5px}
        nav a{color:var(--color-dark);text-decoration:none;margin-left:20px;font-weight:500;transition:color .3s}
        nav a:hover{color:var(--color-primary)}
        .content-wrapper{flex-grow:1}
        .tool-section{max-width:850px;margin:50px auto;padding:30px;width:95%;background:var(--color-surface);border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.1);border:1px solid #EAEAEA}
        .drop-area{border:2px dashed var(--color-primary);background:#F9FBFF;padding:60px 20px;text-align:center;border-radius:10px;transition:background-color .3s,border-color .3s;cursor:pointer}
        .drag-text{font-size:2em;font-weight:700;color:var(--color-dark);margin-bottom:10px;display:flex;align-items:center;justify-content:center;gap:15px}
        .file-icon{font-size:2.2em;color:var(--color-primary)}
        .or-text{margin:15px 0;color:var(--color-muted);font-style:italic}
        .select-btn{border:none;padding:15px 35px;font-size:1.1em;border-radius:8px;font-weight:600;cursor:pointer;box-shadow:0 4px 6px rgba:0,0,0,.1}
        .select-btn{background:var(--color-primary);color:var(--color-surface)}
        .files-area{margin-top:20px;padding:20px;background:#fff;border-radius:10px;border:1px solid #e1e4e8}
        .file-card{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;margin-bottom:10px;border-radius:6px;background:#f9f9f9;border:1px solid #eee}
        .file-name{font-weight:600}
        .remove-file{background:none;border:none;color:var(--color-error);font-size:1.2em;cursor:pointer;padding:5px}
        .convert-area{margin-top:30px;text-align:center}
        .convert-btn{background-image:linear-gradient(to right,var(--color-secondary),var(--color-primary));color:var(--color-surface);border:none;padding:20px 30px;font-size:1.4em;font-weight:bold;border-radius:10px;width:100%;cursor:pointer;box-shadow:0 8px 15px rgba(0,122,255,.3);margin-top:20px}
        .progress-bar-container{margin-top:20px;width:100%;background:#e0e0e0;border-radius:10px;overflow:hidden}
        .progress-bar{height:25px;width:0;background-color:var(--color-success);text-align:center;line-height:25px;color:white;font-weight:bold}
        .clear-btn{background:#6c757d;color:white;border:none;padding:10px 15px;border-radius:6px;cursor:pointer}
        .instructions-section{max-width:1000px;margin:0 auto;padding:60px 20px}
        .site-footer{background:var(--color-dark);color:var(--color-muted);padding:20px 0;text-align:center;margin-top:auto;font-size:.9em;border-top:3px solid var(--color-primary)}
        @media(max-width:768px){.tool-section{margin:30px auto 20px;padding:15px}.drag-text{font-size:1.5em}}
    </style>
</head>
<body>
    <div class="trust-bar">üîí <strong>100% Client-Side Processing.</strong> Merge PDF without uploading files.</div>
    <header class="site-header">
        <div class="header-content">
            <h2 class="logo" onclick="window.location.href='index.html'">ImagePDF.Pro</h2>
            <nav>
                <a href="index.html">Home</a>
                <a href="jpg-to-pdf.html">JPG to PDF</a>
                <a href="pdf-merger.html">PDF Merger</a>
                <a href="image-compressor.html">Compress</a>
            </nav>
        </div>
    </header>

    <main class="content-wrapper">
        <section class="tool-section">
            <h1 style="font-size:1.5em;margin-bottom:18px;text-align:center">PDF Merger ‚Äî Combine PDF Files Securely</h1>
            
            <div style="margin: 20px 0; text-align: center;">
                </div>
            <div class="drop-area" id="dropArea" onclick="document.getElementById('fileInput').click()">
                <h2 class="drag-text"><span class="file-icon">üìÅ</span> Drag &amp; Drop Your PDFs Here</h2>
                <p class="or-text">OR</p>
                <input type="file" id="fileInput" accept="application/pdf" multiple style="display:none" />
                <button class="select-btn" onclick="event.stopPropagation(); document.getElementById('fileInput').click()">Select PDFs</button>
                <p class="file-count" id="fileStatus" style="margin-top:10px;">Select at least two PDFs.</p>
            </div>

            <div id="filesArea" class="files-area" style="display:none;">
                <p style="margin-bottom:15px; font-weight:600;">Files for merging (Drag to reorder):</p>
                <div id="fileList" style="margin-bottom:15px;"></div>
                <button class="clear-btn" id="clearBtn">Clear All Files</button>
            </div>

            <div class="convert-area">
                <button class="convert-btn" id="mergeBtn" disabled>Merge PDFs & Download</button>
                <div id="progressBarContainer" class="progress-bar-container" style="display:none;">
                    <div id="progressBar" class="progress-bar">0%</div>
                </div>
            </div>
        </section>

        <div style="margin: 20px auto; text-align: center;">
            </div>
        <section id="seo-content" class="instructions-section">
            <h2>Why Merge PDFs Client-Side?</h2>
            <p>Client-side merging guarantees that your confidential documents never leave your computer, offering the fastest and most secure way to combine PDFs.</p>
        </section>
    </main>

    <footer class="site-footer">
        <p>&copy; 2024 <strong>ImagePDF.Pro</strong> | Built with client-side technology for maximum privacy.</p>
    </footer>

    <script>
        const { PDFDocument } = PDFLib;
        const fileInput = document.getElementById('fileInput');
        const dropArea = document.getElementById('dropArea');
        const fileList = document.getElementById('fileList');
        const fileStatus = document.getElementById('fileStatus');
        const filesArea = document.getElementById('filesArea');
        const mergeBtn = document.getElementById('mergeBtn');
        const clearBtn = document.getElementById('clearBtn');
        const progressBar = document.getElementById('progressBar');
        const progressBarContainer = document.getElementById('progressBarContainer');

        let files = []; // Array to store PDF File objects

        function updateFileStatus() {
            fileStatus.textContent = `${files.length} PDFs selected.`;
            mergeBtn.disabled = files.length < 2;
            if (files.length === 0) {
                fileStatus.textContent = 'Select at least two PDFs.';
                filesArea.style.display = 'none';
            } else {
                filesArea.style.display = 'block';
            }
        }

        function renderFileList() {
            fileList.innerHTML = '';
            files.forEach((file, index) => {
                const card = document.createElement('div');
                card.className = 'file-card';
                card.draggable = true;
                card.dataset.index = index;
                card.innerHTML = `<span class="file-name">${index + 1}. ${file.name}</span>
                                  <button class="remove-file" data-index="${index}">‚ùå</button>`;
                fileList.appendChild(card);
            });
            // (Drag and drop listeners logic should be implemented here, similar to jpg-to-pdf.html)
            addRemoveListeners();
        }

        function addRemoveListeners() {
            fileList.querySelectorAll('.remove-file').forEach(button => {
                button.addEventListener('click', e => {
                    const indexToRemove = parseInt(e.target.dataset.index);
                    files.splice(indexToRemove, 1);
                    renderFileList();
                    updateFileStatus();
                });
            });
        }

        function processFiles(fileListToAdd) {
            Array.from(fileListToAdd).forEach(file => {
                if (file.type === 'application/pdf') {
                    files.push(file);
                }
            });
            renderFileList();
            updateFileStatus();
        }

        async function mergePdfs() {
            if (files.length < 2) return;

            mergeBtn.disabled = true;
            mergeBtn.textContent = 'Merging... Please wait.';
            progressBarContainer.style.display = 'block';

            const mergedPdf = await PDFDocument.create();

            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                try {
                    const arrayBuffer = await file.arrayBuffer();
                    const pdfDoc = await PDFDocument.load(arrayBuffer);
                    
                    const copiedPages = await mergedPdf.copyPages(pdfDoc, pdfDoc.getPageIndices());
                    copiedPages.forEach((page) => mergedPdf.addPage(page));

                    const progress = Math.round(((i + 1) / files.length) * 100);
                    progressBar.style.width = progress + '%';
                    progressBar.textContent = `${progress}% Done`;

                } catch (error) {
                    alert(`Error processing file ${file.name}: ${error.message}`);
                    break;
                }
            }

            const mergedPdfBytes = await mergedPdf.save();
            const blob = new Blob([mergedPdfBytes], { type: 'application/pdf' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'merged_document.pdf';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            mergeBtn.textContent = 'Merge PDFs & Download';
            mergeBtn.disabled = false;
            progressBarContainer.style.display = 'none';
        }

        // Event Listeners
        fileInput.addEventListener('change', e => processFiles(e.target.files));
        mergeBtn.addEventListener('click', mergePdfs);
        clearBtn.addEventListener('click', () => { files = []; renderFileList(); updateFileStatus(); });
        
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, e => {
                e.preventDefault(); e.stopPropagation();
                if (eventName === 'dragenter' || eventName === 'dragover') dropArea.classList.add('drag-over');
                else dropArea.classList.remove('drag-over');
            }, false);
        });

        dropArea.addEventListener('drop', e => {
            dropArea.classList.remove('drag-over');
            processFiles(e.dataTransfer.files);
        }, false);
    </script>
</body>
</html>
